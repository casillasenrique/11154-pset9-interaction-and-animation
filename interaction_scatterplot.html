<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>D3 Transitions</title>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <style></style>
  </head>

  <body>
    <!-- Add buttons with IDs -->
    <!-- PART 1 -->
    <!-- <button id="start">Transition</button>
    <button id="reset">Reset</button> -->

    <!-- PART 2 -->
    <button id="firstyear">2015 coffee shops</button>
    <button id="secondyear">2016 coffee shops</button>
    <div id="main"></div>
    <script type="text/javascript">
      data = [
        [40, 50, 60, 30],
        [90, 120, 10, 30],
        [30, 90, 80, 100],
        [10, 10, 100, 120],
        [60, 40, 40, 60],
      ];

      //Width and height
      const width = 800;
      const height = 600;

      const bubbleSpacing = 100;
      const bubbleScale = 2.5;

      const svg = d3
        .select('div#main')
        .append('svg')
        .attr('width', width)
        .attr('height', height)
        .attr('style', 'outline: thin solid black;');

      // Moves circles to new location using the 'transition' and 'reset'
      // buttons
      // COMMENTED OUT PART 1 CODE
      // d3.select('#start').on('click', () => {
      //   svg
      //     .selectAll('circle')
      //     .transition()
      //     .attr('cx', (d) => {
      //       return d[2];
      //     })
      //     .attr('cy', (d) => {
      //       return d[3];
      //     });
      // });
      // d3.select('#reset').on('click', () => {
      //   svg
      //     .selectAll('circle')
      //     .transition()
      //     .attr('cx', (d) => {
      //       return d[0];
      //     })
      //     .attr('cy', (d) => {
      //       return d[1];
      //     });
      // });

      // PART 2 CODE

      // Changes the position of the bubbles and change the radius of the
      // circles based on the data
      svg
        .selectAll('circle')
        .data(data)
        .enter()
        .append('circle')
        .attr('cx', (d, i) => 100 + i * bubbleSpacing)
        .attr('cy', 200)
        .attr('r', (d) => d[1] / bubbleScale)
        .attr('fill', 'orange');

      // Changes button size based on the year
      d3.select('#firstyear').on('click', () => {
        svg
          .selectAll('circle')
          .transition()
          .attr('r', (d) => d[1] / bubbleScale);
      });
      d3.select('#secondyear').on('click', () => {
        svg
          .selectAll('circle')
          .transition()
          .attr('r', (d) => d[3] / bubbleScale);
      });
    </script>
  </body>
</html>
